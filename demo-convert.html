<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Blockchain Payload Tools</title>
  <meta name="author" content="Boyan Yankov">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script src="dist/bpteth.min.js"></script>
</head>
<body>
  <div class="container">
    <div class="row">
      <h1>Blockchain Payload Tools Demo</h1>
    </div>
        
    <div class="row">  
      <h2>Text to hex converter</h2>
      <table class="table">
        <tr>  
          <th scope="row">Input</th>
          <td><textarea name="input" id="input"></textarea></td>
        </tr>
        <tr>  
          <th scope="row">Operation</th>
          <td>
            <select name="operation" id="operation">
              <option value="toHex">Text to hex</option>
              <option value="toUtf8">Hex to text</option>
            </select>
          </td>
        </tr>
        <tr>  
          <th scope="row">Output</th>
          <td><textarea name="output" id="output" disabled="disabled"></textarea></td>
        </tr>
        <tr>  
          <td colspan="2"><input type="submit" id="text_to_hex_button" value="Convert" /></td>
        </tr>
      </table>
    </div>
    <script>
      document.getElementById('text_to_hex_button').addEventListener("click", function(event){
        event.preventDefault()
        
        //get form data
        let operationInput = document.getElementById('input').value;
        let operationElement = document.getElementById('operation');
        let operationType = operationElement.options[operationElement.selectedIndex].value;
        
        //process data
        const bptEth = new BptEth();
        let operationOutput = '';
        if (operationType == 'toHex'){ 
          operationOutput = bptEth.toHex(operationInput);
        } else if (operationType == 'toUtf8'){
          operationOutput = bptEth.toUtf8(operationInput);
        }
        
        document.getElementById('output').value = operationOutput;
        
      });
    </script>
    
  </div>
</body>
</html>